<div class="table-wrapper">
    <div class="table-header">
      <button (click)="resetColumnFilters()" class="reset-cols">
        Reset Column Filters
      </button>
      <mat-paginator hidePageSize="true" pageSize="10"> </mat-paginator>
    </div>
  
    <table
      mat-table
      [dataSource]="dataSource"
      recycleRows
      matSort
      class="mat-elevation-z10"
    >
      @for (col of columns; track $index) {
        <ng-container [matColumnDef]="col.columnDef">
          <th mat-header-cell *matHeaderCellDef mat-sort-header [formGroup]="fg">
            <div class="col-header-wrapper">
              <div class="col-title">{{ col.header }}</div>
                <div class="col-search-wrapper">
                  <input
                    type="text"
                    class="col-search-input"
                    [placeholder]="'Search ' + col.header"
                    [formControlName]="col.columnDef"
                    (keydown)="$event.stopPropagation()"
                    (click)="$event.stopPropagation()"
                  />
                </div>
              
            </div>
          </th>
  
          <td mat-cell *matCellDef="let row" class="table-cell">
            @if (col.type == "date") {
              {{
                col.cell(row) == "null"
                  ? ""
                  : (col.cell(row) | date: "MM/dd/yyyy")
              }}
            } @else if (col.type == "price") {
              {{ col.cell(row) == "null" ? "" : (col.cell(row) | currency) }}
            } @else {
              {{ col.cell(row) == "null" ? "" : col.cell(row) }}
            }
          </td>
        </ng-container>
      }
  
      <tr *matNoDataRow>
        <td [attr.colspan]="displayedColumns.length" class="no-data-row">
          <h2>No Data Found</h2>
        </td>
      </tr>
      <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
  </div>
